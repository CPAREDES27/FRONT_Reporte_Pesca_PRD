<mvc:View
    controllerName="com.tasa.reportecala.controller.MasterPage"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns="sap.m"
	xmlns:form="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:t="sap.ui.table"
    xmlns:semantic="sap.f.semantic"
>
	
		<App id="app">
			<pages>
                <Page showHeader="true" title="Consulta de Calas" >
                    <content>
                        <form:Form width="100%" editable="true" visible="true">
                            <form:formContainers>
                                <form:FormContainer visible="true">
                                    <form:formElements>
                                        <form:FormElement visible="true">
                                            <form:label>
                                                <Label text="Centro" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                            </form:label>
                                            <form:fields>
                                                <Input id="txtCentro" suggestionItemSelected="onSelectWerks" type="Text" valueState="Information" valueStateText="Ingrese centro" showSuggestion="true" showTableSuggestionValueHelp="false" suggestionRows="{reporteCala>/centros}" width="100%">
                                                    <suggestionColumns>
                                                        <Column>
                                                            <Label text="Planta" />
                                                        </Column>
                                                        <Column>
                                                            <Label text="Descripción" />
                                                        </Column>
                                                        <Column>
                                                            <Label text="Centro" />
                                                        </Column>
                                                        <Column>
                                                            <Label text="Armador" />
                                                        </Column>
                                                    </suggestionColumns>
                                                    <suggestionRows>
                                                        <ColumnListItem>
                                                            <Label text="{reporteCala>CDPTA}" />
                                                            <Label text="{reporteCala>DESCR}" />
                                                            <Label text="{reporteCala>WERKS}" />
                                                            <Label text="{reporteCala>STCD1}" />
                                                        </ColumnListItem>
                                                    </suggestionRows>
                                                </Input>
                                            </form:fields>
                                        </form:FormElement>
                                        <!-- <form:FormElement visible="true">
                                            <form:label>
                                                <Label text="Ubicación planta" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                            </form:label>
                                            <form:fields>
                                                <ComboBox id="cbUbicaciones" items="{reporteCala>/ubicaciones}" editable="true" enabled="true" visible="true" width="100%" valueState="None">
                                                    <items>
                                                        <core:Item text="{reporteCala>descripcion}" enabled="true" key="{reporteCala>id}"/>
                                                    </items>
                                                </ComboBox>
                                            </form:fields>
                                        </form:FormElement> -->
                                        <form:FormElement visible="true">
                                            <form:label>
                                                <Label text="Embarcación" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                            </form:label>
                                            <form:fields>
                                            <Input id="inputId0_R" placeholder="Seleccione embarcación" showValueHelp="true"  valueHelpRequest="onSearchHelp"/>
                                                <!-- <Input id="embarcacion" showValueHelp="true" valueHelpRequest="onAbrirAyudaEmbarcacion" width="100%" valueStateText="Invalid entry"/> -->
                                            </form:fields>
                                        </form:FormElement>
                                        <form:FormElement visible="true">
                                            <form:label>
                                                <Label text="Indicador de propiedad" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                            </form:label>
                                            <form:fields>
                                                <ComboBox id="cbIndicadorPropiedad" items="{reporteCala>/zdoZinprpDom}" editable="true" enabled="true" visible="true" width="100%" valueState="None">
                                                    <items>
                                                        <core:Item text="{reporteCala>descripcion}" enabled="true" key="{reporteCala>id}"/>
                                                    </items>
                                                </ComboBox>
                                            </form:fields>
                                        </form:FormElement>
                                        <form:FormElement visible="true">
                                            <form:label>
                                                <Label text="Tipo marea" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                            </form:label>
                                            <form:fields>
                                                <ComboBox id="cbTipoMarea" items="{reporteCala>/zdoTipoMareaDom}" editable="true" enabled="true" visible="true" width="100%" valueState="None">
                                                    <items>
                                                        <core:Item text="{reporteCala>descripcion}" enabled="true" key="{reporteCala>id}"/>
                                                    </items>
                                                </ComboBox>
                                            </form:fields>
                                        </form:FormElement>
                                        <form:FormElement visible="true">
                                            <form:label>
                                                <Label text="Fecha inicio marea" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                            </form:label>
                                            <form:fields>
                                                
                                                <DateRangeSelection id="idDateRangeIniMar" valueFormat="yyyyMMdd" displayFormat="dd/MM/yyyy" width="100%"/>
                                            </form:fields>
                                        </form:FormElement>
                                        <form:FormElement visible="true">
                                            <form:label>
                                                <Label text="Fecha fin marea" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                            </form:label>
                                            <form:fields>
                                                
                                                <DateRangeSelection id="idDateRangeFinMar" valueFormat="yyyyMMdd" displayFormat="dd/MM/yyyy" width="100%"/>
                                            </form:fields>
                                        </form:FormElement>
                                        <form:FormElement visible="true">
                                            <form:label>
                                                <Label text="Cantidad de aciertos" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                            </form:label>
                                            <form:fields>
                                                <Input id="txtCantidad" value="200" type="Number" showValueHelp="false" enabled="true" visible="true" width="100%" valueHelpOnly="false" required="false" valueStateText="Invalid entry" maxLength="0"/>
                                            </form:fields>
                                        </form:FormElement>
                                        <form:FormElement visible="true">
                                            <form:label>
                                                <Label text="" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                            </form:label>
                                            <form:fields>
                                                <Button text="Buscar" type="Emphasized" icon="sap-icon://search" iconFirst="true" width="100%" enabled="true" visible="true" iconDensityAware="false"
                                                press="loadReporteCalas"/>
                                                <Button press="clearFields" text="Limpiar"  icon="sap-icon://clear-filter" iconFirst="true" width="100%" enabled="true" visible="true" iconDensityAware="false"/>
                                            </form:fields>
                                        </form:FormElement>
                                    </form:formElements>
                                    <form:title/>
                                </form:FormContainer>
                            </form:formContainers>
                            <form:layout>
                                <form:ResponsiveGridLayout adjustLabelSpan="true" columnsL="2" labelSpanL="3" columnsM="1" labelSpanM="2" labelSpanS="12" singleContainerFullSize="true" />
                            </form:layout>
                        </form:Form>

                        <ScrollContainer  width="100%" vertical="true" focusable="true">
                            <t:Table id="tableReporteCalas" rows="{reporteCala>/items}" visibleRowCount="8" ariaLabelledBy="title" selectionMode="None">
                                    <t:extension>
					                    <OverflowToolbar style="Clear">
						                    <Title text="Lista de registros {/dataCount}" id="idListaReg"/>
                                            <ToolbarSpacer width=""/>
                                            <Button press='.exportarExcel' text="Exportar" icon="sap-icon://excel-attachment" iconFirst="true" width="auto" enabled="true" visible="true" iconDensityAware="false"/>
                                            <Button press='.exportBiometriaToExcel' text="Exportar Biometria" icon="sap-icon://excel-attachment" iconFirst="true" width="auto" enabled="true" visible="true" iconDensityAware="false"/>
                                            <SearchField value="{ui>/globalFilter}" liveChange=".filterGlobally" placeholder="Búsqueda rápida" width="auto"/>
					                    </OverflowToolbar>
				                    </t:extension>
                                    <t:columns>
                                        <t:Column width="9rem" filterProperty="DSZPC" defaultFilterOperator="Contains" sortProperty="DSZPC">
						                    <Label text="Zona pesca" />
						                    <t:template>
							                    <Text text="{reporteCala>DSZPC}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="6rem" filterProperty="WERKS" defaultFilterOperator="Contains" sortProperty="WERKS">
						                    <Label text="Centro" />
						                    <t:template>
							                    <Text text="{reporteCala>WERKS}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="8rem" filterProperty="DESCR" defaultFilterOperator="Contains" sortProperty="DESCR">
						                    <Label text="Planta" />
						                    <t:template>
							                    <Text text="{reporteCala>DESCR}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="8rem" filterProperty="FECCONMOV" defaultFilterOperator="Contains">
						                    <Label text="Fecha producción" />
						                    <t:template>
							                    <Text text="{reporteCala>FECCONMOV}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    
                                    <t:columns>
                                        <t:Column width="6rem" filterProperty="NRMAR" defaultFilterOperator="EQ" sortProperty="NRMAR">
						                    <Label text="Marea" />
						                    <t:template>
							                    <Text text="{reporteCala>NRMAR}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="9rem" filterProperty="NRDES" defaultFilterOperator="Contains" sortProperty="NRDES">
						                    <Label text="Descarga" />
						                    <t:template>
							                    <Text text="{reporteCala>NRDES}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="7rem" filterProperty="DESC_TIPOMAREA" defaultFilterOperator="Contains" sortProperty="DESC_TIPOMAREA">
						                    <Label text="Tipo marea" />
						                    <t:template>
							                    <Text text="Pesca {reporteCala>DESC_TIPOMAREA}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="8rem" filterProperty="NMEMB" defaultFilterOperator="Contains" sortProperty="NMEMB">
						                    <Label text="Embarcación" />
						                    <t:template>
							                    <Text text="{reporteCala>NMEMB}" wrapping="true" maxLines="3" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="9rem" filterProperty="MREMB" defaultFilterOperator="Contains" sortProperty="MREMB">
						                    <Label text="Matricula"/>
						                    <t:template>
							                    <Text text="{reporteCala>MREMB}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="6rem" hAlign="End" filterProperty="CPPMS" defaultFilterOperator="EQ" sortProperty="CPPMS">
						                    <Label text="Cbod"/>
						                    <t:template>
							                    <Text text="{reporteCala>CPPMS}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="10rem" filterProperty="DESC_INPRP" defaultFilterOperator="Contains" sortProperty="DESC_INPRP">
						                    <Label text="Indicador propiedad" />
						                    <t:template>
							                    <Text text="{reporteCala>DESC_INPRP}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="8rem" filterProperty="FIEVN" defaultFilterOperator="Contains">
						                    <Label text="Fecha Ini Cala" />
						                    <t:template>
							                    <Text text="{reporteCala>FIEVN}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="8rem" filterProperty="HIEVN" defaultFilterOperator="Contains">
						                    <Label text="Hora Ini Cala" />
						                    <t:template>
							                    <Text text="{reporteCala>HIEVN}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="8rem" filterProperty="FFEVN" defaultFilterOperator="Contains">
						                    <Label text="Fecha Fin Cala" />
						                    <t:template>
							                    <Text text="{reporteCala>FFEVN}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="8rem" filterProperty="HFEVN" defaultFilterOperator="Contains">
						                    <Label text="Hora Fin Cala"/>
						                    <t:template>
							                    <Text text="{reporteCala>HFEVN}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="8rem" filterProperty="FIEVN" defaultFilterOperator="Contains">
						                    <Label text="Fecha Ini Envase" />
						                    <t:template>
							                    <Text text="{reporteCala>FIEVN}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="8rem" filterProperty="HIEVN" defaultFilterOperator="Contains">
						                    <Label text="Hora Ini Envase" />
						                    <t:template>
							                    <Text text="{reporteCala>HIEVN}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="8rem" filterProperty="FFEVN" defaultFilterOperator="Contains">
						                    <Label text="Fecha Fin Envase" />
						                    <t:template>
							                    <Text text="{reporteCala>FFEVN}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="8rem" filterProperty="HFEVN" defaultFilterOperator="Contains">
						                    <Label text="Hora Fin Envase" />
						                    <t:template>
							                    <Text text="{reporteCala>HFEVN}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="7rem" hAlign="End" filterProperty="LTGEO" defaultFilterOperator="EQ" sortProperty="LTGEO">
						                    <Label text="Latitud" />
						                    <t:template>
							                    <Text text="{reporteCala>LTGEO}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="7rem" hAlign="End" filterProperty="LNGEO" defaultFilterOperator="EQ" sortProperty="LNGEO">
						                    <Label text="Longitud" />
						                    <t:template>
							                    <Text text="{reporteCala>LNGEO}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="7rem" hAlign="End" filterProperty="TEMAR" defaultFilterOperator="EQ" sortProperty="TEMAR">
						                    <Label text="Temperatura" />
						                    <t:template>
							                    <Text text="{reporteCala>TEMAR}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="8rem" hAlign="End" filterProperty="CNPCM" defaultFilterOperator="EQ" sortProperty="CNPCM">
						                    <Label text="Pesca declarada" />
						                    <t:template>
							                    <Text text="{reporteCala>CNPCM}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="6rem" filterProperty="DTCAL" defaultFilterOperator="EQ" sortProperty="DTCAL">
						                    <Label text="Duración" />
						                    <t:template>
							                    <Text text="{reporteCala>DTCAL}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="9rem" filterProperty="DSSPC" defaultFilterOperator="EQ" sortProperty="DSSPC">
						                    <Label text="Especie" />
						                    <t:template>
							                    <Text text="{reporteCala>DSSPC}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="6rem" hAlign="End" filterProperty="ZMODA" defaultFilterOperator="EQ" sortProperty="ZMODA">
						                    <Label text="Moda" />
						                    <t:template>
							                    <Text text="{reporteCala>ZMODA}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="11rem" filterProperty="OBSER" defaultFilterOperator="EQ" sortProperty="OBSER">
						                    <Label text="Observaciones"/>
						                    <t:template>
							                    <Text text="{reporteCala>OBSER}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="11rem" hAlign="End" filterProperty="CNPJU" defaultFilterOperator="EQ" sortProperty="CNPJU">
						                    <Label text="Jurel - Pesca declarada" wrapping="true"/>
						                    <t:template>
							                    <Text text="{reporteCala>CNPJU}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="11rem" hAlign="End" filterProperty="ZMOJU" defaultFilterOperator="EQ" sortProperty="ZMOJU">
						                    <Label text="Jurel - Moda" wrapping="true"/>
						                    <t:template>
							                    <Text text="{reporteCala>ZMOJU}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="11rem" hAlign="End" filterProperty="PORJU" defaultFilterOperator="EQ" sortProperty="PORJU">
						                    <Label text="Jurel - % Incidencia" wrapping="true"/>
						                    <t:template>
							                    <Text text="{reporteCala>PORJU}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                     <t:columns>
                                        <t:Column width="11rem" hAlign="End" filterProperty="CNPCA" defaultFilterOperator="EQ" sortProperty="CNPCA">
						                    <Label text="Caballa - Pesca declarada" wrapping="true"/>
						                    <t:template>
							                    <Text text="{reporteCala>CNPCA}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="11rem" hAlign="End" filterProperty="ZMOCA" defaultFilterOperator="EQ" sortProperty="ZMOCA">
						                    <Label text="Caballa - Moda" wrapping="true"/>
						                    <t:template>
							                    <Text text="{reporteCala>ZMOCA}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="11rem" hAlign="End" filterProperty="PORCA" defaultFilterOperator="EQ" sortProperty="PORCA">
						                    <Label text="Caballa - % Incidencia" wrapping="true"/>
						                    <t:template>
							                    <Text text="{reporteCala>PORCA}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="11rem" hAlign="End" filterProperty="CNPOT" defaultFilterOperator="EQ" sortProperty="CNPOT">
						                    <Label text="Otras especies - Pesca declarada" wrapping="true"/>
						                    <t:template>
							                    <Text text="{reporteCala>CNPOT}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="11rem" hAlign="End" filterProperty="ZMOOT" defaultFilterOperator="EQ" sortProperty="ZMOOT">
						                    <Label text="Otras especies - Moda" wrapping="true"/>
						                    <t:template>
							                    <Text text="{reporteCala>ZMOOT}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                    <t:columns>
                                        <t:Column width="11rem" hAlign="End" filterProperty="POROT" defaultFilterOperator="EQ" sortProperty="POROT">
						                    <Label text="Otras especies - % Incidencia" wrapping="true"/>
						                    <t:template>
							                    <Text text="{reporteCala>POROT}" wrapping="false" />
						                    </t:template>
					                    </t:Column>       
                                    </t:columns>
                                </t:Table>
                        </ScrollContainer>
                        
                    </content>
                    
                </Page>
			</pages>
		</App>
	
</mvc:View>
